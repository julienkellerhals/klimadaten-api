{% extends 'base.html' %}
{% block title %}Admin{% endblock %}

{% block head %}
{{ super() }}
<style>
    #adminContainer {
        height: 100%;
        display: flex;
        align-items: stretch;
    }

    #serverLog {
        flex-grow: 2;
    }

    #panel {
        flex-grow: 1;
    }

    #panelContainer {
        padding: 0em 2em;
        display: flex;
        flex-direction: column;
    }

    .service {
        height: 2em;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dot {
        height: 25px;
        width: 25px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
    }

    .det .success {
        background-color: green;
    }

    .dot .error {
        background-color: red;
    }
</style>
{% endblock %}

{% block container %}
<div id="adminContainer">
    <div id="serverLog">
        <h1>Server Log</h1>
        Add server log here
    </div>
    <div id="panel">
        <h1>Panel</h1>
        <h3>Running services</h3>
        <div id="panelContainer">
            <div class="service" id="driverLoc">
                Driver missing / found
                <span class="dot"></span>
            </div>
            <div class="service" id="driverStatus">
                Webdriver status
                <span class="dot"></span>
            </div>
            <div class="service" id="engineStatus">
                Database engine status
                <span class="dot"></span>
            </div>
            <div class="service">
                More to be added
                <span class="dot"></span>
            </div>
            <script>
                var eventSource = new EventSource("/admin/testFunc")
                eventSource.onmessage = function (e) {
                    var entry = document.createElement("div");
                    entry.className = "eventItem"
                    entry.innerHTML = e.data;
                    eventContainer.appendChild(entry);
                };
            </script>
        </div>
    </div>
</div>
{% endblock %}